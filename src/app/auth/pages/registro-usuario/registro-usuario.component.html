<div class="grid grid-cols-4 auto-cols-maxjustify-center px-6 py-5 lg:px-8">
  <div class="hidden md:block"></div>
  <div class="card bg-white rounded-lg mt-5 mb-5 p-0 md:p-9 lg:p-9 col-span-4 md:col-span-2 lg:col-span-2">
    <div class="sm:w-full mt-10">
      <h2 class="ml-2 mt-5 text-left text-2xl md:text-3xl font-bold leading-9 tracking-tight text-gray-900">
        Crear Cuenta
      </h2>
    </div>
    <div class="mt-10 sm:w-full mr-3 ml-3">
      <form [formGroup]="userGroup" (ngSubmit)="onSubmit()">
        <div class="pb-5">
          <div class="mt-5 grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6">
            <div class="sm:col-span-3">
              <label for="identity" class="block text-sm font-medium leading-6 text-gray-900">Cédula
              </label>
              <div class="mt-2">
                <input type="text" name="identity" id="identity" formControlName="cedula"
                  class="block w-full rounded-md border-2 py-1.5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-500 peer peer-invalid"
                  pattern=".{10}$" />
                <span
                  class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Cédula debe tener 10 dígitos
                </span>
              </div>
            </div>
            <div class="sm:col-span-3 sm:col-start-1">
              <label for="user-name" class="block text-sm font-medium leading-6 text-gray-900">Nombres</label>
              <div class="mt-2">
                <input type="text" name="user-name" id="user-name" formControlName="nombres"
                  class="block w-full rounded-md border-2 py-1.5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-500 peer peer-invalid"
                  pattern="^[a-zA-Z\sáéíóúüñÁÉÍÓÚÜÑ]*$" />
                <span
                  class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Solo se permiten letras.
                </span>
              </div>
            </div>
            <div class="sm:col-span-3">
              <label for="user-lastname" class="block text-sm font-medium leading-6 text-gray-900">Apellidos</label>
              <div class="mt-2">
                <input type="text" name="user-lastname" id="user-lastname" formControlName="apellidos"
                  class="block w-full rounded-md border-2 py-1.5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-500 peer"
                  pattern="^[a-zA-Z\sáéíóúüñÁÉÍÓÚÜÑ]*$" />
                <span
                  class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Solo se permiten letras.
                </span>
              </div>
            </div>
            <div class="sm:col-span-3">
              <label for="role" class="block text-sm font-medium leading-6 text-gray-900">Tipo Usuario</label>
              <div class="mt-2">
                <ng-select
                  [items]="userTypes2"
                  bindLabel="label"
                  bindValue="value"
                  [searchable]="false"
                  placeholder="Tipo Usuario"
                  formControlName="rolId"
                  notFoundText="No hay roles"
                  class="ng-custom"
                >
                </ng-select>
              </div>
            </div>
            <div class="sm:col-span-4">
              <label for="email" class="block text-sm font-medium leading-6 text-gray-900">Correo electrónico</label>
              <div class="mt-2">
                <input id="email" name="email" type="email" formControlName="email" autocomplete="email"
                  class="block w-full rounded-md border-2 py-1.5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-500 peer peer-invalid"
                  pattern="[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*@[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,5}" />
                <span
                  class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Correo electrónico inválido
                </span>
              </div>
            </div>
            <div class="sm:col-span-2">
              <label for="phoneNumber" class="block text-sm font-medium leading-6 text-gray-900">Celular</label>
              <div class="mt-2">
                <input id="phoneNumber" name="phoneNumber" type="text" autocomplete="phoneNumber"
                  formControlName="phoneNumber"
                  class="block w-full rounded-md border-2 py-1.5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-500 peer"
                  pattern=".{10}$" />
                <span
                  class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Celular debe tener 10 dígitos
                </span>
              </div>
            </div>

            <div class="sm:col-span-3 sm:col-start-1">
              <label for="password" class="block text-sm font-medium leading-6 text-gray-900">Contraseña</label>

              <div class="mt-2 relative">
                  <input id="password" name="password" [type]="showPassword ? 'text' : 'password'" autocomplete="current-password"
                  formControlName="password"
                  class="block w-full rounded-md border-1 py-1.5 text-gray-900 ring-1 ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 pr-10 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-700 peer peer-invalid"
                  pattern=".{10,}$" />
                <span class="absolute inset-y-0 right-0 pr-3 pt-3 items-center text-sm">
                  <fa-icon [icon]="showPassword ? faEyeSlash : faEye" (click)="togglePasswordVisibility()"
                    class="cursor-pointer text-gray-400"></fa-icon>
                </span>

                <!--VALIDACIONES CONTRASEÑA-->
                <p class="mt-2 hidden text-xs text-gray-500 peer-[&:not(:placeholder-shown):not(:focus):invalid]:block">
                  *Contraseña debe tener al menos 10 caracteres
                </p>
                <p *ngIf="userGroup.controls['password'].getError('atLeastOneLowercase') && userGroup.controls['password']?.touched" class="mt-2 text-xs text-gray-500">
                  *Contraseña debe tener al menos una letra minúscula
                </p>
                <p *ngIf="userGroup.controls['password'].getError('atLeastOneUppercase') && userGroup.controls['password']?.touched" class="mt-2 text-xs text-gray-500">
                  *Contraseña debe tener al menos una letra mayúscula
                </p>
                <p *ngIf="userGroup.controls['password'].getError('atLeastOneSymbol') && userGroup.controls['password']?.touched" class="mt-2 text-xs text-gray-500">
                  *Contraseña debe tener al menos un símbolo
                </p>
                <p *ngIf="userGroup.controls['password'].getError('toNumber') && userGroup.controls['password']?.touched" class="mt-2 text-xs text-gray-500">
                  *Contraseña debe tener al menos un número
                </p>
                <!--FIN VALIDACIONES CONTRASEÑA-->
              </div>
            </div>

            <div class="sm:col-span-3">
              <label for="passwordConfirm" class="block text-sm font-medium leading-6 text-gray-900">Confirmar
                contraseña</label>
              <div class="mt-2 relative">
                  <input id="passwordConfirm" name="passwordConfirm" [type]="showPassword ? 'text' : 'password'" autocomplete="current-password"
                  formControlName="passwordConfirm"
                  class="block w-full rounded-md border-1 py-1.5 text-gray-900 ring-1 ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6 pl-2 pr-10 invalid:[&:not(:placeholder-shown):not(:focus)]:border-gray-700 peer peer-invalid"
                  pattern=".{10,}$" />
                <span class="absolute inset-y-0 right-0 pr-3 pt-3 items-center text-sm">
                  <fa-icon [icon]="showPassword ? faEyeSlash : faEye" (click)="togglePasswordVisibility()"
                    class="cursor-pointer text-gray-400"></fa-icon>
                </span>
              </div>
              <div *ngIf="userGroup.getError('mustBeEqual') && userGroup.controls['passwordConfirm']?.touched" class="text-gray-500 text-xs">
                *No coincide con la contraseña
              </div>
            </div>
          </div>
        </div>
        <div class="hidden md:block">
          <ngx-recaptcha2 #captchaElem [siteKey]="siteKey"> </ngx-recaptcha2>
        </div>
        <div class="mt-6 flex items-center justify-end gap-x-3 pb-7">
          <button type="button" routerLink="/auth/login" class="text-white bg-gray-500 hover:bg-gray-400 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2">
            Cancelar
          </button>
          <button type="submit"
                  [disabled]="userGroup.invalid || userGroup.controls['password'].value !== userGroup.controls['passwordConfirm'].value"
                  class="text-white bg-blue-900 hover:bg-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2">
            Registrarse
          </button>
        </div>
      </form>
    </div>
  </div>
  <div class="hidden md:block"></div>
</div>
<spinner-generate [message]="'Guardando'"></spinner-generate>

